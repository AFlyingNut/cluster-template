apiVersion: viaduct.ai/v1
kind: ksops
metadata:
  name: secret-generator
  annotations:
    config.kubernetes.io/function: |
        exec:
          path: ksops
secretFrom:
  - metadata:
      name: helm-values
      labels:
        app: argocd
      annotations:
        kustomize.config.k8s.io/needs-hash: "false"
    type: Opaque
    files:
      - ./values.sops.yaml
      - secret.yaml=./values.sops.yaml

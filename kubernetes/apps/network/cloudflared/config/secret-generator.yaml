apiVersion: viaduct.ai/v1
kind: ksops
metadata:
  name: cloudflared-secret-generator
  namespace: network
  annotations:
    config.kubernetes.io/function: |
      exec:
        path: ksops
files:
  - ./cloudflared-secret.sops.yaml
  - ./dnsendpoint.sops.yaml

configMapGenerator:
  - name: cloudflared-configmap
    files:
      - ./cloudflared-config.sops.yaml
generatorOptions:
  disableNameSuffixHash: true
